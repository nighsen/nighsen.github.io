[{"title":"怎样加大RTMP视频流的延迟","url":"/2019/03/14/how-to-dealy-an-rtmp-stream/","content":"一般情况下，我们都是想方设法去降低RTMP视频流的延迟，比如降低服务器缓存Buffer、减小GOP、播放器拿到足够的视频帧就马上播放之类的方法。不过最近有个比较奇特的需求，就是加大RTMP视频流的延迟，找到了几个方法，记录一下。\n\n> 1. 使用OBS\n[OBS-Studio](https://obsproject.com/download)本身就有拉转的功能，需要设置一个媒体源，设置为输入流，然后再转推出去。OBS-Studio设置的高级选项里面，有个流延迟的设置，可以设置推流的延迟，从而达到上面的目的。\n\n> 2. 找到了一个开源项目[rtmp_stream_delayer](https://github.com/sistason/rtmp_stream_delayer)\n用的ffmpeg和nginx，大致方法是nginx把视频记录到硬盘，等到延迟时间再读本地视频文件推出去，犯懒了没有实际去测试。\n\n> 3. 看到上面的方法，想到用2个ffmpeg进程是不是也可以实现\n大致这样，起2个ffmpeg，一个录制，一个推流，录制开始一段时间后开始推流\n试了一下，能正常使用还不错～\n``` bash\nffmpeg -re -i rtmp://pull.url.com/app/xxx -c copy -f flv demo.flv  //录制命令\nffmpeg -re -i demo.flv -c copy -f flv rtmp://push.url.com/app/yyy  //推流命令\n```\n\n应该还有一些其他的方法，如果直接在推流服务器上，可以直接加大一下packet的buffer，多存一些再发送就可以，这个也是有些服务器为了加快打开速度的一种方式。\n\n","tags":["FFmpeg","RTMP"]},{"title":"Hello World","url":"/2019/03/13/hello-world/","content":"打算写博客很多次了，也开始了很多次，但是也中断了很多次:P。归根结底还是比较懒，都没有积累起来。\n之前一直把笔记作为一种很不错的积累方式，不过还是因为懒，大多数都是资料的堆砌，年深日久就变成了一潭死水。而不是自己试验过的，自己改造过的，还真是不太敢拿出来。也是想激励一下自己，做一些“自己化”的积累，那就开始写博客吧，记录自己干过啥而不是学过啥。不怕慢只怕站，即使像只蜗牛，也要努力地爬起来～\n``` bash\nHello World！\n```\n","tags":["Undefined"]}]